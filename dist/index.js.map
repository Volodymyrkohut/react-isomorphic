{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/server/index.js","webpack:///./src/server/middleware/html.js","webpack:///./src/server/middleware/render.js","webpack:///./src/shared/App.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"escape-string-regexp\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-router-dom\""],"names":["express","use","req","res","app","handle","listen","process","env","PORT","console","log","path","resolve","__dirname","htmlMiddleware","renderMiddleware","next","publicPath","join","fs","readFile","err","html","status","send","url","routerContext","data","htmlContent","ReactDOMServer","renderToString","htmlReplacements","HTML_CONTENT","Object","keys","forEach","key","value","replace","RegExp","escapeStringRegexp","header","redirect","About","Index","Occupation","App"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import express from 'express';\nimport app from \"./server\";\n\nexpress()\n    .use((req, res) => app.handle(req, res))\n    .listen(process.env.PORT || 8080, () => {\n        console.log(\n            `React-isomorphic App is running`\n        );\n    });","import path from 'path';\nimport express from 'express';\nimport htmlMiddleware from './middleware/html';\nimport renderMiddleware from './middleware/render';\nconst app = express();\n\napp.use(\"/public\", express.static(path.resolve(__dirname, 'public')));\napp.use(htmlMiddleware());\napp.use(renderMiddleware());\n\nexport default app;\n","import fs from 'fs';\nimport path from 'path';\n\nconst htmlMiddleware = () => (req, res, next) => {\n    const publicPath = path.join(__dirname, '/public');\n\n    fs.readFile(`${publicPath}/index.html`, 'utf8', (err, html) => {\n        if (!err) {\n            req.html = html;\n            next();\n        } else {\n            res.status(500).send('Error parsing index.html');\n        }\n    });\n};\n\nexport default htmlMiddleware;","import escapeStringRegexp from 'escape-string-regexp';\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport App from '../../shared/App.js';\nimport {StaticRouter} from 'react-router-dom';\n\nconst renderMiddleware = () => (req, res) => {\n    const {url} = req;\n    let html = req.html;\n\n    const routerContext = {};\n    const data = \"server\";\n\n    const htmlContent = ReactDOMServer.renderToString(\n        <StaticRouter\n            location={url}\n            context={routerContext}>\n            <App data={data}/>\n        </StaticRouter>);\n\n    const htmlReplacements = {\n        HTML_CONTENT: htmlContent,\n    };\n\n    Object.keys(htmlReplacements).forEach(key => {\n        const value = htmlReplacements[key];\n        html = html.replace(new RegExp('__' + escapeStringRegexp(key) + '__', 'g'), value);\n    });\n\n    if (routerContext.url) {\n        res.header('Cache-Control', 'no-cache, no-store, must-revalidate');\n        res.header('Pragma', 'no-cache');\n        res.header('Expires', 0);\n        res.redirect(302, routerContext.url);\n    } else {\n        res.send(html);\n    }\n\n};\n\nexport default renderMiddleware;\n","import React from \"react\";\nimport {NavLink, Switch, Route, withRouter, Redirect} from \"react-router-dom\";\n\nconst About = () => <div>about page</div>;\nconst Index = () => <div>index page</div>;\nconst Occupation = () => <div>occupation page</div>;\n\nconst App = ({data}) => {\n    return <div>\n        Data {data} <br/>\n\n        <nav>\n            <ul>\n                <li><NavLink exact to=\"/\">Main</NavLink></li>\n                <li><NavLink to=\"/about\">About</NavLink></li>\n                <li><NavLink to=\"/occupation\">Occupation</NavLink></li>\n            </ul>\n        </nav>\n\n\n        <Switch>\n            <Route path=\"/\" component={Index} exact={true}/>\n            <Route path=\"/about\" component={About} exact={true}/>\n            <Route path=\"/occupation\" component={Occupation} exact={true}/>\n        </Switch>\n    </div>\n};\n\nexport default App","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"escape-string-regexp\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-router-dom\");"],"sourceRoot":""}